(function(n,t,i){function et(){return!!t.cookie}function ot(){h(r.testName,"fail");n.location.reload()}function st(){h(r.testName,"pass");n.location.reload()}function ht(){k(r.testName);n.location.reload()}function nt(){v=t.createElement("body");f.insertBefore(v,f.firstChild);u=v}function tt(){f.removeChild(v);u=t.body}function ct(){var n=a(r.testName),t,i;if(n)n==="pass"?(rt(),r.onPass()):(r.onFail(),w()),r.appendToggleLink&&p(function(){it(n)});else{t=!0;nt();for(i in r.tests)if(t=r.tests[i](),!t){r.alertOnFailure&&alert(i+" failed");break}tt();n=t?"pass":"fail";h(r.testName,n);t?(rt(),r.onPass()):(r.onFail(),w());r.appendToggleLink&&p(function(){it(n)})}}function p(t){if(d)t();else{var i=n.onload;n.onload=function(){i&&i();t()}}}function it(n){if(r.appendToggleLink&&enhance.cookiesSupported&&n){var i=t.createElement("a");i.href="#";i.className=r.testName+"_toggleResult";i.innerHTML=n==="pass"?r.forceFailText:r.forcePassText;i.onclick=n==="pass"?enhance.forceFail:enhance.forcePass;t.getElementsByTagName("body")[0].appendChild(i)}}function w(){f.className=f.className.replace(r.testName,"")}function rt(){g=!0;r.loadStyles.length&&vt();r.loadScripts.length?yt():r.onScriptsLoaded()}function lt(t,i){a(c)&&a(l)?(k(c),k(l)):(h(c,t),h(l,i));n.location.reload()}function y(n){return o.length==2&&(n==o[0]?n=o[1]:n==o[1]&&(n=o[0])),n}function at(){var n=r.testName+"-incomplete";f.className.indexOf(n)===-1&&(f.className+=" "+n)}function ut(n){var t,i;if(n.constructor===Array){t=!0;for(i in n)t&&(t=!!n[i]);return t}return!!n}function vt(){for(var h=-1,n,f,u,o;n=r.loadStyles[++h];)if(f=t.createElement("link"),f.type="text/css",f.rel="stylesheet",f.onerror=r.onLoadError,typeof n=="string")f.href=n,e.appendChild(f);else if(n.media&&(n.media=y(n.media),r.media&&r.media[n.media]!==i&&(n.media=r.media[n.media])),n.excludemedia&&(n.excludemedia=y(n.excludemedia)),u=!0,n.media&&n.media!=="print"&&n.media!=="projection"&&n.media!=="speech"&&n.media!=="aural"&&n.media!=="braille"&&(u=s(n.media)),u&&n.excludemedia&&(u=!s(n.excludemedia)),u&&n.iecondition&&(u=b(n.iecondition)),u&&n.ifsupported!==i&&(u=ut(n.ifsupported),u||n.fallback===i||(n.href=n.fallback,u=!0)),u){for(o in n)o!=="iecondition"&&o!=="excludemedia"&&o!=="ifsupported"&&o!=="fallback"&&f.setAttribute(o,n[o]);e.appendChild(f)}}function yt(){r.queueLoading?pt():wt()}function pt(){function n(){if(t.length===0)return!1;var f=t.shift(),i=ft(f),u=!1;if(i)i.onload=i.onreadystatechange=function(){u||this.readyState&&this.readyState!="loaded"&&this.readyState!="complete"||(u=!0,n()===!1&&r.onScriptsLoaded(),this.onload=this.onreadystatechange=null)},e.insertBefore(i,e.firstChild);else return n()}var t=[].concat(r.loadScripts);n()}function wt(){for(var i=-1,t,n;t=r.loadScripts[++i];)n=ft(t),n&&e.insertBefore(n,e.firstChild);r.onScriptsLoaded()}function ft(n){var e=t.createElement("script"),u,f;if(e.type="text/javascript",e.onerror=r.onLoadError,typeof n=="string")return e.src=n,e;if(n.media&&(n.media=y(n.media),r.media&&r.media[n.media]&&(n.media=r.media[n.media])),n.excludemedia&&(n.excludemedia=y(n.excludemedia)),u=!0,n.media&&(u=s(n.media)),u&&n.excludemedia&&(u=!s(n.excludemedia)),u&&n.iecondition&&(u=b(n.iecondition)),u&&n.ifsupported!==i&&(u=ut(n.ifsupported),u||n.fallback===i||(n.src=n.fallback,u=!0)),u){for(f in n)f!=="iecondition"&&f!=="media"&&f!=="excludemedia"&&f!=="ifsupported"&&f!=="fallback"&&e.setAttribute(f,n[f]);return e}return!1}function h(n,i,r){var u,f;r=r||90;u=new Date;u.setTime(u.getTime()+r*864e5);f="; expires="+u.toGMTString();t.cookie=n+"="+i+f+"; path=/"}function a(n){for(var i,u=n+"=",f=t.cookie.split(";"),r=0;r<f.length;r++){for(i=f[r];i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(u)==0)return i.substring(u.length,i.length)}return null}function k(n){h(n,"",-1)}function bt(){t.readyState==null&&t.addEventListener&&(t.addEventListener("DOMContentLoaded",function n(){t.removeEventListener("DOMContentLoaded",n,!1);t.readyState="complete"},!1),t.readyState="loading")}var r,u,v,d,e,f=t.documentElement,g=!1,c,l,o=[],s,b;e=t.getElementsByTagName?t.getElementsByTagName("head")[0]||f:f;s=function(){var r={},n=t.createElement("div");return n.setAttribute("id","ejs-qtest"),function(f){var o,s,h;return r[f]===i&&(nt(),o=t.createElement("style"),o.type="text/css",e.appendChild(o),s="@media "+f+" { #ejs-qtest { position: absolute; width: 10px; } }",o.styleSheet?o.styleSheet.cssText=s:o.appendChild(t.createTextNode(s)),u.appendChild(n),h=n.offsetWidth,u.removeChild(n),e.removeChild(o),tt(),r[f]=h==10),r[f]}}();n.enhance=function(n){var t,u,e;n=n||{};r={};for(t in enhance.defaultSettings)u=n[t],r[t]=u!==i?u:enhance.defaultSettings[t];for(e in n.addTests)r.tests[e]=n.addTests[e];f.className.indexOf(r.testName)===-1&&(f.className+=" "+r.testName);c=r.testName+"-toggledmediaA";l=r.testName+"-toggledmediaB";o=[a(c),a(l)];setTimeout(function(){g||w()},3e3);ct();bt();p(function(){d=!0})};enhance.query=s;enhance.defaultTests={getById:function(){return!!t.getElementById},getByTagName:function(){return!!t.getElementsByTagName},createEl:function(){return!!t.createElement},boxmodel:function(){var n=t.createElement("div"),i;return n.style.cssText="width: 1px; padding: 1px;",u.appendChild(n),i=n.offsetWidth,u.removeChild(n),i===3},position:function(){var n=t.createElement("div"),i;return n.style.cssText="position: absolute; left: 10px;",u.appendChild(n),i=n.offsetLeft,u.removeChild(n),i===10},floatClear:function(){var f=!1,n=t.createElement("div"),e='style="width: 5px; height: 5px; float: left;"';n.innerHTML="<div "+e+"><\/div><div "+e+"><\/div>";u.appendChild(n);var o=n.childNodes,s=o[0].offsetTop,i=o[1],r=i.offsetTop;return s===r&&(i.style.clear="left",r=i.offsetTop,s!==r&&(f=!0)),u.removeChild(n),f},heightOverflow:function(){var n=t.createElement("div"),i;return n.innerHTML='<div style="height: 10px;"><\/div>',n.style.cssText="overflow: hidden; height: 0;",u.appendChild(n),i=n.offsetHeight,u.removeChild(n),i===0},ajax:function(){for(var n=!1,i=-1,t,r=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];t=r[++i];){try{n=t()}catch(u){continue}break}return!!n},resize:function(){return n.onresize!=!1},print:function(){return!!n.print}};enhance.defaultSettings={testName:"enhanced",loadScripts:[],loadStyles:[],queueLoading:!0,appendToggleLink:!0,forcePassText:"View high-bandwidth version",forceFailText:"View low-bandwidth version",tests:enhance.defaultTests,media:{"-ejs-desktop":enhance.query("screen and (max-device-width: 1024px)")?"not screen and (max-device-width: 1024px)":"screen","-ejs-handheld":"screen and (max-device-width: 1024px)"},addTests:{},alertOnFailure:!1,onPass:function(){},onFail:function(){},onLoadError:at,onScriptsLoaded:function(){}};enhance.cookiesSupported=et();enhance.cookiesSupported&&(enhance.forceFail=ot);enhance.cookiesSupported&&(enhance.forcePass=st);enhance.cookiesSupported&&(enhance.reTest=ht);enhance.toggleMedia=lt;b=function(){var r={},n;return function(u){if(/*@cc_on!@*/!0)return!1;var f="IE";return u&&u!=="all"&&(isNaN(parseFloat(u))?f=u:f+=" "+u),r[f]===i&&(n=n||t.createElement("B"),n.innerHTML="<!--[if "+f+"]><b><\/b><![endif]-->",r[f]=!!n.getElementsByTagName("b").length),r[f]}}()})(window,document);